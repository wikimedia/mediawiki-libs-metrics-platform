{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b648a6ca_bc5bf4fc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 2974
      },
      "writtenOn": "2022-10-06T14:41:19Z",
      "side": 1,
      "message": "Commit message should be updated to reflect the current status of this CR.",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 78
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8b7ca416_0967d972",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 2974
      },
      "writtenOn": "2022-10-10T14:50:33Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b648a6ca_bc5bf4fc",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 78
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3728a106_0adb0390",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 9678
      },
      "writtenOn": "2022-10-10T14:53:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b648a6ca_bc5bf4fc",
      "range": {
        "startLine": 7,
        "startChar": 7,
        "endLine": 7,
        "endChar": 78
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fc446044_0edb8bc9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 2974
      },
      "writtenOn": "2022-10-06T14:41:19Z",
      "side": 1,
      "message": "A few minor comments inline. I would appreciate having David review this as well.",
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2980a47c_5cb8a122",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 2638
      },
      "writtenOn": "2022-10-06T15:15:56Z",
      "side": 1,
      "message": "lgtm\nconcerns unrelated to the patch itself:\n- there does not seem to be any limit in size of the BlockingQueue, in case that the streamConfig can\u0027t be fetched (running the app offline?) we might blowup mem usage?",
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cbdd7ec6_26e438fc",
        "filename": "java/src/main/java/org/wikimedia/metrics_platform/MetricsClient.java",
        "patchSetId": 4
      },
      "lineNbr": 123,
      "author": {
        "id": 2974
      },
      "writtenOn": "2022-10-06T14:41:19Z",
      "side": 1,
      "message": "I would keep the name `setStreamConfigs`. The fact that we are using an AtomicRef is an implementation detail that should be hidden from the caller.",
      "range": {
        "startLine": 123,
        "startChar": 9,
        "endLine": 123,
        "endChar": 34
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7b624b4e_975d4545",
        "filename": "java/src/main/java/org/wikimedia/metrics_platform/MetricsClient.java",
        "patchSetId": 4
      },
      "lineNbr": 123,
      "author": {
        "id": 9678
      },
      "writtenOn": "2022-10-06T15:29:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cbdd7ec6_26e438fc",
      "range": {
        "startLine": 123,
        "startChar": 9,
        "endLine": 123,
        "endChar": 34
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ead06ae_d052dab8",
        "filename": "java/src/main/java/org/wikimedia/metrics_platform/MetricsClient.java",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 2974
      },
      "writtenOn": "2022-10-06T14:41:19Z",
      "side": 1,
      "message": "This null-check should not be needed.\n\nNote that this whole method is only called from tests but not from production code. This seems like a check that was done in the previous event sending implementation but has not been ported to the new one. There is already a \"TODO\" on L199 that addresses this issue, so this method can be removed (this should ideally be done in a previous CR, but can be done as part of this one if it is easier).",
      "range": {
        "startLine": 137,
        "startChar": 0,
        "endLine": 137,
        "endChar": 50
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8158102_1dc23e13",
        "filename": "java/src/main/java/org/wikimedia/metrics_platform/MetricsClient.java",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 9678
      },
      "writtenOn": "2022-10-06T15:29:48Z",
      "side": 1,
      "message": "Does that mean SamplingController is not needed on the MetricsClient",
      "parentUuid": "1ead06ae_d052dab8",
      "range": {
        "startLine": 137,
        "startChar": 0,
        "endLine": 137,
        "endChar": 50
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d497723d_e1417a2f",
        "filename": "java/src/main/java/org/wikimedia/metrics_platform/MetricsClient.java",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 2974
      },
      "writtenOn": "2022-10-10T14:42:02Z",
      "side": 1,
      "message": "No, it looks like we forgot about it during the metrics sending refactoring. We\u0027ll need to re-introduce it in another CR.",
      "parentUuid": "f8158102_1dc23e13",
      "range": {
        "startLine": 137,
        "startChar": 0,
        "endLine": 137,
        "endChar": 50
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cc5fac12_27f589ee",
        "filename": "java/src/main/java/org/wikimedia/metrics_platform/MetricsClient.java",
        "patchSetId": 4
      },
      "lineNbr": 137,
      "author": {
        "id": 9678
      },
      "writtenOn": "2022-10-10T14:53:44Z",
      "side": 1,
      "message": "Add a filter on the next patch",
      "parentUuid": "f8158102_1dc23e13",
      "range": {
        "startLine": 137,
        "startChar": 0,
        "endLine": 137,
        "endChar": 50
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f539244_fe8a8ff1",
        "filename": "java/src/main/java/org/wikimedia/metrics_platform/MetricsClient.java",
        "patchSetId": 4
      },
      "lineNbr": 151,
      "author": {
        "id": 2638
      },
      "writtenOn": "2022-10-06T15:15:56Z",
      "side": 1,
      "message": "nit: single space",
      "range": {
        "startLine": 151,
        "startChar": 40,
        "endLine": 151,
        "endChar": 42
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1270a2b1_a03bbee1",
        "filename": "java/src/main/java/org/wikimedia/metrics_platform/MetricsClient.java",
        "patchSetId": 4
      },
      "lineNbr": 151,
      "author": {
        "id": 9678
      },
      "writtenOn": "2022-10-10T14:53:44Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1f539244_fe8a8ff1",
      "range": {
        "startLine": 151,
        "startChar": 40,
        "endLine": 151,
        "endChar": 42
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f16e1085_8e088b1b",
        "filename": "java/src/test/java/org/wikimedia/metrics_platform/MetricsClientTest.java",
        "patchSetId": 4
      },
      "lineNbr": 220,
      "author": {
        "id": 2974
      },
      "writtenOn": "2022-10-06T14:41:19Z",
      "side": 1,
      "message": "Not related to this CR, but those 3 lines could be replaced with\n\n    return Map.of(\"test_event\", streamConfig)\n\nwith the additional benefit of returning an immutable map.",
      "range": {
        "startLine": 218,
        "startChar": 8,
        "endLine": 220,
        "endChar": 29
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3144ca70_8a052b06",
        "filename": "java/src/test/java/org/wikimedia/metrics_platform/MetricsClientTest.java",
        "patchSetId": 4
      },
      "lineNbr": 220,
      "author": {
        "id": 9678
      },
      "writtenOn": "2022-10-06T15:29:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f16e1085_8e088b1b",
      "range": {
        "startLine": 218,
        "startChar": 8,
        "endLine": 220,
        "endChar": 29
      },
      "revId": "46694b677d61b31aceaf7c502b4f0381f17335a4",
      "serverId": "e9e9afe9-4712-486d-8885-f54b72dd1951"
    }
  ]
}